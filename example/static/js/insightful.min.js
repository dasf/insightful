var insightful=function(){function d(a,b){b=b||"active_time";"undefined"===typeof d[b]&&(d[b]=r(function(){var a=b;l(a)?n(a,parseInt(l(a),10)+1):n(a,1)},1E3));d[b]()}function n(a,b,c){c=c||h;m.setItem(c+a,b,Infinity,"/")}function l(a,b){b=b||h;return m.getItem(b+a)}function s(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"==b?c:c&7|8).toString(16)})}function t(){var a=l("id","isession_"); a||(a=s(),n("id",a,"isession_"));for(var a={uuid:a,path:window.location.pathname,id:p},b={},c=m.keys(),f=0;f<c.length;f++)if(c[f].slice(0,h.length)==h){b[c[f]]=l(c[f].substring(h.length));var d=c[f].substring(h.length),g=void 0,g=g||h;m.removeItem(g+d,"/")}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);$.post(q,a)}function k(a,b,c){return a.addEventListener?(a.addEventListener(b,c,!1),!0):a.attachEvent?a.attachEvent("on"+b,c):!1}function r(a,b){var c,f,d,g=null,e=0,h=function(){e=new Date;g=null; d=a.apply(c,f)};return function(){var k=new Date;e||(e=k);var l=b-(k-e);c=this;f=arguments;0>=l?(clearTimeout(g),g=null,e=k,d=a.apply(c,f)):g||(g=setTimeout(h,l));return d}}var q,p,h="i_",m={getItem:function(a){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(a,b,c,f,d,g){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var e="";if(c)switch(c.constructor){case Number:e= Infinity===c?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:e="; expires="+c;break;case Date:e="; expires="+c.toUTCString()}document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+e+(d?"; domain="+d:"")+(f?"; path="+f:"")+(g?"; secure":"");return!0},removeItem:function(a,b,c){if(!a||!this.hasItem(a))return!1;document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(c?"; domain="+c:"")+(b?"; path="+b:"");return!0},hasItem:function(a){return(new RegExp("(?:^|;\\s*)"+ encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=0;b<a.length;b++)a[b]=decodeURIComponent(a[b]);return a}};return{init:function(a){q=a.url;p=a.id;t();$(document).ready(function(){k(document,"keydown",d);k(document,"click",d);k(window,"mousemove",d);k(window,"scroll",d);$("[data-track-name]").each(function(){for(var a="click mousemove blur focus keydown mouseenter".split(" "), c=0;c<a.length;c++)k(this,a[c],function(a){d(a,$(this).attr("data-track-name"))})})})}}}();